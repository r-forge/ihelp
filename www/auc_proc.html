<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Area Under Curve (AUC) - pROC 팩키지</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<h1>Area Under Curve (AUC) - pROC 팩키지</h1>

<pre><code class="r">Sys.setlocale(&quot;LC_CTYPE&quot;, &quot;Korean_Korea&quot;)
</code></pre>

<pre><code>## [1] &quot;Korean_Korea.949&quot;
</code></pre>

<p>데이터마이닝이나 통계형 모형의 성능을 시험한 결과를 비교할때 유용하게 쓰여지는 방법으로 Area Under Curve를 계산하는 방법이있다. 여기서 Area Under Curve라고 하는것은 ROC 곡선(curve)하의 면적을 뜻한다. </p>

<p>ROC 곡선은 Receiver Operating Characteristics의 준말로 세계 2차대전 당시 레이다의 성능을 나타내는 도표로 제일 처음 사용되었다. 보편적으로 ROC 곡선은 True Positive Rate과 False Positive Rate값들을 도표로 그린것인데, 여기서 True Positive Rate은 sensitivity(감도)라고도 표기되며 False Positive Rate은 specificity(특이성)에 반비례한다. 정확하게 말하자면 1 빼기 specificity를 나타낸다. 즉 Specificity는 True Negative Rate의 다른 말이다.</p>

<p>AUC를 구하는 방법이 여러가지있는데 여기서 손쉽게 구하는 방법으로 pROC 팩키지를 소개할까한다.</p>

<p>아래의 예에서는 rpart 의사결정나무로 모형을 만들고 그 성능을 시험하는 방법으로 pROC 팩키지를 사용하여 ROC 곡선을 그린후 곡선하의 면적(AUC)을 계산하였다.</p>

<pre><code class="r">library(rpart)
library(pROC)

Dat &lt;- kyphosis
a &lt;- rep(0, nrow(Dat))
a[which(Dat$Kyphosis == &quot;present&quot;)] &lt;- 1
Dat$Present &lt;- a

a &lt;- sample(c(1:nrow(Dat)), size = nrow(Dat) * 0.7, replace = FALSE)

Train &lt;- Dat[a, ]  #training 데이터
Test &lt;- Dat[-a, ]  #test 데이터

RP1 &lt;- rpart(Present ~ Age + Number + Start, Train, control = rpart.control(minsplit = 15, 
    cp = 1e-04))  #나무 만들기

Pred1 &lt;- predict(RP1, Test[, c(&quot;Age&quot;, &quot;Number&quot;, &quot;Start&quot;)])
Test$Prediction1 &lt;- Pred1

# ROC 계산
ROC1 &lt;- roc(Test$Present, Test$Prediction1)

# ROC 그리기
plot(ROC1, col = &quot;blue&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-2"/> </p>

<pre><code>## 
## Call:
## roc.default(response = Test$Present, predictor = Test$Prediction1)
## 
## Data: Test$Prediction1 in 20 controls (Test$Present 0) &lt; 5 cases (Test$Present 1).
## Area under the curve: 0.875
</code></pre>

<pre><code class="r">
# AUC 계산
AUC1 &lt;- auc(ROC1)
AUC1
</code></pre>

<pre><code>## Area under the curve: 0.875
</code></pre>

<p>위에서 볼수있듯이 그래프에 회색으로 그려진 대각선을 기준으로 곡선이 좌측 상단을 향해 가까이 갈수록 sensitivity와 specificity가 높아진다. 그리고 동시에 곡선하의 면적또한 커지게된다. 즉 모형의 성능이 좋을수록 ROC 곡선은 좌측 상단으로 붙게되며 AUC가 커지게 된다.     </p>

<p>이 모형과 비교하기위해 같은 데이터를 사용하여 더 큰 나무를 만들어보겠다. 여기서 나무의 크기를 아주 크게하여 overfit이 생기는지도 알아보겠다.</p>

<pre><code class="r">RP2 &lt;- rpart(Present ~ Age + Number + Start, Train, control = rpart.control(minsplit = 3, 
    cp = 1e-05))  #큰 나무 만들기

opar &lt;- par(mfrow = c(1, 2))
plot(RP1, main = &quot;RP1&quot;)
plot(RP2, main = &quot;RP2&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-3"/> </p>

<pre><code class="r">par(opar)
</code></pre>

<p>그리고 같은 test데이터를 사용하여 ROC곡선과 AUC값을 비교한다.</p>

<pre><code class="r">Pred2 &lt;- predict(RP2, Test[, c(&quot;Age&quot;, &quot;Number&quot;, &quot;Start&quot;)])

# test세트 present의 예상확률을 test data에 추가
Test$Prediction2 &lt;- Pred2

# ROC 계산
ROC2 &lt;- roc(Test$Present, Test$Prediction2)

# ROC 비교
plot(ROC1, col = &quot;blue&quot;)
</code></pre>

<pre><code>## 
## Call:
## roc.default(response = Test$Present, predictor = Test$Prediction1)
## 
## Data: Test$Prediction1 in 20 controls (Test$Present 0) &lt; 5 cases (Test$Present 1).
## Area under the curve: 0.875
</code></pre>

<pre><code class="r">par(new = TRUE)
plot(ROC2, col = &quot;green&quot;, xaxt = &quot;n&quot;, yaxt = &quot;n&quot;)
</code></pre>

<pre><code>## 
## Call:
## roc.default(response = Test$Present, predictor = Test$Prediction2)
## 
## Data: Test$Prediction2 in 20 controls (Test$Present 0) &lt; 5 cases (Test$Present 1).
## Area under the curve: 0.6
</code></pre>

<pre><code class="r">legend(&quot;right&quot;, legend = c(&quot;RP1&quot;, &quot;RP2&quot;), col = c(&quot;blue&quot;, &quot;green&quot;), lty = 1)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-4"/> </p>

<p>예상대로 더 큰 나무(RP2)가 overfit을 하면서 ROC곡선이 대각선과 상대적으로 가깝게 그려진것을 볼수있다. 즉 더 작은 나무(RP1)의 성능이 더 좋다는것이다.</p>

<pre><code class="r"># AUC 비교
AUC1
</code></pre>

<pre><code>## Area under the curve: 0.875
</code></pre>

<pre><code class="r">
AUC2 &lt;- auc(ROC2)
AUC2
</code></pre>

<pre><code>## Area under the curve: 0.6
</code></pre>

<p>위의 관찰결과를 AUC값을 계산해서 정확하게 확인할수있다.  RP1의 AUC값이 RP2보다 확실히 더 큰것을 알수있다. </p>

<p>위의 예 처럼 육안으로 ROC 곡선들의 차이가 확연히 들어나는 경우도 있지만 ROC곡선들이 서로 엇갈리는 경우처럼 차이가 뚜렸하지 않을때 AUC값을 비교하여 더 좋은 성능의 모형을 찾아낼수있다.</p>

<h2>교차확인(cross-validation)시 AUC사용</h2>

<p>아마도 AUC값이 가장 유용하게 쓰여지는 경우가 교차확인을 하는 경우일것이다. ROC곡선으로 모든 교차확인결과를 보여주기는 교차확인의 수가 많을경우 제대로 보여주기 힘들며, 해당 기준점에서 얻어진 오류값을 비교하는것은 그 모형의 성능을 전체적으로 비교하지 못하므로  AUC를 사용하여 아래의 예처럼 비교할수있다. </p>

<pre><code class="r">SUMM &lt;- data.frame()
n &lt;- 0
repeat {
    n &lt;- n + 1

    b &lt;- sample(c(1:nrow(Test)), size = nrow(Test) * 0.8, replace = FALSE)

    TDat &lt;- Test[b, ]

    Pred1 &lt;- predict(RP1, TDat[, c(&quot;Age&quot;, &quot;Number&quot;, &quot;Start&quot;)])
    Pred2 &lt;- predict(RP2, TDat[, c(&quot;Age&quot;, &quot;Number&quot;, &quot;Start&quot;)])

    TDat$Score1 &lt;- Pred1
    TDat$Score2 &lt;- Pred2

    ROC1 &lt;- roc(TDat$Present, TDat$Score1)
    AUC1 &lt;- auc(ROC1)

    SUMMX &lt;- data.frame(validation = n, model = &quot;RP1&quot;, AUC = AUC1)
    SUMM &lt;- rbind(SUMM, SUMMX)

    ROC2 &lt;- roc(TDat$Present, TDat$Score2)
    AUC2 &lt;- auc(ROC2)

    SUMMX &lt;- data.frame(validation = n, model = &quot;RP2&quot;, AUC = AUC2)
    SUMM &lt;- rbind(SUMM, SUMMX)

    if (n == 10) {
        break
    }
}

boxplot(AUC ~ model, SUMM, ylim = c(0, 1))
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-6"/> </p>

<p>위의 그래프에서 볼수있듯이 boxplot을 사용하여 두 모형의 교차확인 결과를 전체적으로 비교할수있다. 이 결과는 즉 각 모형의 robustness를 보여주는 결과이기도 하다.</p>

</body>

</html>

